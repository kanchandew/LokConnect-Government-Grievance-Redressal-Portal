<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LokConnect - Admin Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  </head>
  <body class="bg-gray-50">
    <!-- Login Page (shown by default) -->
    <div
      id="login-page"
      class="min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 to-blue-50"
    >
      <div class="bg-white p-8 rounded-lg shadow-xl w-full max-w-md slide-up">
        <!-- <div class="text-center mb-8">
					<i class="fas fa-landmark text-primary-600 text-2xl mr-2"></i>
					<h1 class="text-2xl font-bold text-gray-800">Admin Portal</h1>
					<p class="text-gray-600 mt-2">Department Grievance Management</p>
				</div> -->
        <div class="mb-6 text-center">
          <i class="fas fa-user-shield text-primary-600 text-4xl mb-2"></i>
          <h2 class="text-2xl font-bold text-gray-800">Admin Panel Login</h2>
          <p class="text-sm text-gray-500">
            Only authorized department officers allowed
          </p>
        </div>

        <form id="login-form" class="space-y-6">
          <div
            id="login-error"
            class="hidden bg-red-50 border-l-4 border-red-500 p-4"
          >
            <div class="flex">
              <div class="flex-shrink-0">
                <i class="fas fa-exclamation-circle text-red-500"></i>
              </div>
              <div class="ml-3">
                <p class="text-sm text-red-700" id="error-message">
                  Invalid credentials
                </p>
              </div>
            </div>
          </div>

          <div>
            <label for="email" class="block text-sm font-medium text-gray-700"
              >Email</label
            >
            <div class="mt-1 relative rounded-md shadow-sm">
              <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
              >
                <i class="fas fa-envelope text-gray-400"></i>
              </div>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="py-2 pl-10 block w-full border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"
                placeholder="your@email.com"
              />
            </div>
          </div>

          <div>
            <label
              for="password"
              class="block text-sm font-medium text-gray-700"
              >Password</label
            >
            <div class="mt-1 relative rounded-md shadow-sm">
              <div
                class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
              >
                <i class="fas fa-lock text-gray-400"></i>
              </div>
              <input
                type="password"
                id="password"
                name="password"
                required
                class="py-2 pl-10 block w-full border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"
                placeholder="••••••••"
              />
            </div>
          </div>

          <div>
            <button
              type="submit"
              class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-emerald-600 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 transition-colors"
            >
              <i class="fas fa-sign-in-alt mr-2"></i> Login
            </button>
          </div>
        </form>

        <div class="mt-6 text-center text-sm text-gray-500">
          <p>For security reasons, please log out after each session.</p>
        </div>
      </div>
    </div>

    <!-- Admin Dashboard (hidden by default) -->
    <div id="dashboard" class="hidden min-h-screen">
      <!-- Header -->
      <header class="bg-white shadow-sm">
        <div
          class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center"
        >
          <div class="flex items-center">
            <img
              src="https://via.placeholder.com/150x50?text=LokConnect"
              alt="LokConnect Logo"
              class="h-10"
            />
            <span class="ml-4 text-lg font-medium text-gray-900"
              >Admin Panel</span
            >
          </div>
          <div class="flex items-center space-x-4">
            <span class="text-sm font-medium text-gray-700 hidden md:block"
              >Water Supply Department</span
            >
            <div class="relative">
              <button
                id="user-menu-button"
                class="flex items-center space-x-2 focus:outline-none"
              >
                <span
                  class="h-8 w-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-800 font-medium"
                  >WS</span
                >
                <i class="fas fa-chevron-down text-gray-400 text-xs"></i>
              </button>
              <div
                id="user-menu"
                class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10"
              >
                <a
                  href="#"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Your Profile</a
                >
                <a
                  href="#"
                  id="logout-btn"
                  class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"
                  >Logout</a
                >
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- Main Content -->
      <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
        <div class="mb-8">
          <h1 class="text-2xl font-bold text-gray-900">
            Welcome, Water Supply Officer
          </h1>
          <p class="text-gray-600 mt-2">
            Manage grievances assigned to your department
          </p>
        </div>

        <!-- Stats Cards -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div class="bg-white rounded-lg shadow p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                <i class="fas fa-inbox text-lg"></i>
              </div>
              <div class="ml-4">
                <p class="text-sm font-medium text-gray-500">
                  Total Complaints
                </p>
                <p class="text-2xl font-semibold text-gray-900">142</p>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-lg shadow p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                <i class="fas fa-spinner text-lg"></i>
              </div>
              <div class="ml-4">
                <p class="text-sm font-medium text-gray-500">In Progress</p>
                <p class="text-2xl font-semibold text-gray-900">38</p>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-lg shadow p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-green-100 text-green-600">
                <i class="fas fa-check-circle text-lg"></i>
              </div>
              <div class="ml-4">
                <p class="text-sm font-medium text-gray-500">Resolved</p>
                <p class="text-2xl font-semibold text-gray-900">89</p>
              </div>
            </div>
          </div>
          <div class="bg-white rounded-lg shadow p-6">
            <div class="flex items-center">
              <div class="p-3 rounded-full bg-gray-100 text-gray-600">
                <i class="fas fa-clock text-lg"></i>
              </div>
              <div class="ml-4">
                <p class="text-sm font-medium text-gray-500">Pending</p>
                <p class="text-2xl font-semibold text-gray-900">15</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Filters and Search -->
        <div class="bg-white rounded-lg shadow mb-6 p-4">
          <div
            class="flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0"
          >
            <div class="flex-1">
              <div class="relative max-w-xs">
                <label for="search" class="sr-only">Search</label>
                <div
                  class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"
                >
                  <i class="fas fa-search text-gray-400"></i>
                </div>
                <input
                  type="text"
                  id="search"
                  class="py-2 pl-10 block w-full border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500"
                  placeholder="Search complaints..."
                />
              </div>
            </div>
            <div class="flex space-x-3">
              <div>
                <select
                  id="status-filter"
                  class="py-2 pl-3 pr-10 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500 text-sm"
                >
                  <option value="">All Status</option>
                  <option value="received">Received</option>
                  <option value="allocated">Allocated</option>
                  <option value="in-progress">In Progress</option>
                  <option value="resolved">Resolved</option>
                </select>
              </div>
              <div>
                <select
                  id="date-filter"
                  class="py-2 pl-3 pr-10 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500 text-sm"
                >
                  <option value="">All Dates</option>
                  <option value="today">Today</option>
                  <option value="week">This Week</option>
                  <option value="month">This Month</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <!-- Complaints Table -->
        <div class="bg-white shadow rounded-lg overflow-hidden">
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Complaint ID
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Date Submitted
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Citizen
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Description
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Status
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Last Updated
                  </th>
                  <th
                    scope="col"
                    class="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"
                  >
                    Actions
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <!-- Complaint Row 1 -->
                <tr class="hover:bg-gray-50">
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                  >
                    WS-2023-00142
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    15 Jun 2023
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Rahul Sharma
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">
                    No water supply in Sector 12 for past 3 days
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"
                      >In Progress</span
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2 hours ago
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"
                  >
                    <button
                      class="text-blue-600 hover:text-blue-900 view-btn"
                      data-id="142"
                    >
                      View
                    </button>
                    <button
                      class="text-emerald-600 hover:text-emerald-900 update-btn"
                      data-id="142"
                    >
                      Update
                    </button>
                  </td>
                </tr>
                <!-- Complaint Row 2 -->
                <tr class="hover:bg-gray-50">
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                  >
                    WS-2023-00141
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    14 Jun 2023
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Priya Patel
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">
                    Water leakage near community center
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800"
                      >Allocated</span
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    1 day ago
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"
                  >
                    <button
                      class="text-emerald-600 hover:text-emerald-900 update-btn"
                      data-id="141"
                    >
                      Update
                    </button>
                  </td>
                </tr>
                <!-- Complaint Row 3 -->
                <tr class="hover:bg-gray-50">
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                  >
                    WS-2023-00140
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    13 Jun 2023
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Amit Kumar
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">
                    Contaminated water supply in Block C
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800"
                      >Resolved</span
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    2 days ago
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"
                  >
                    <button
                      class="text-emerald-600 hover:text-emerald-900 update-btn"
                      data-id="140"
                    >
                      Update
                    </button>
                  </td>
                </tr>
                <!-- Complaint Row 4 -->
                <tr class="hover:bg-gray-50">
                  <td
                    class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"
                  >
                    WS-2023-00139
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    12 Jun 2023
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    Neha Gupta
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-500 max-w-xs truncate">
                    Low water pressure in apartment complex
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800"
                      >Received</span
                    >
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    3 days ago
                  </td>
                  <td
                    class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium"
                  >
                    <button
                      class="text-emerald-600 hover:text-emerald-900 update-btn"
                      data-id="139"
                    >
                      Update
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div
            class="bg-gray-50 px-6 py-3 flex items-center justify-between border-t border-gray-200"
          >
            <div class="flex-1 flex justify-between sm:hidden">
              <a
                href="#"
                class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                >Previous</a
              >
              <a
                href="#"
                class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"
                >Next</a
              >
            </div>
            <div
              class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"
            >
              <div>
                <p class="text-sm text-gray-700">
                  Showing <span class="font-medium">1</span> to
                  <span class="font-medium">4</span> of
                  <span class="font-medium">142</span> complaints
                </p>
              </div>
              <div>
                <nav
                  class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px"
                  aria-label="Pagination"
                >
                  <a
                    href="#"
                    class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
                  >
                    <span class="sr-only">Previous</span>
                    <i class="fas fa-chevron-left"></i>
                  </a>
                  <a
                    href="#"
                    aria-current="page"
                    class="z-10 bg-emerald-50 border-emerald-500 text-emerald-600 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
                    >1</a
                  >
                  <a
                    href="#"
                    class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
                    >2</a
                  >
                  <a
                    href="#"
                    class="bg-white border-gray-300 text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-4 py-2 border text-sm font-medium"
                    >3</a
                  >
                  <a
                    href="#"
                    class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50"
                  >
                    <span class="sr-only">Next</span>
                    <i class="fas fa-chevron-right"></i>
                  </a>
                </nav>
              </div>
              <div>
                <select
                  class="py-1 pl-2 pr-8 border border-gray-300 rounded-md focus:ring-emerald-500 focus:border-emerald-500 text-sm"
                >
                  <option>10 per page</option>
                  <option>25 per page</option>
                  <option>50 per page</option>
                </select>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Status Update Modal (hidden by default) -->
    <div id="status-modal" class="hidden fixed inset-0 overflow-y-auto z-50">
      <div
        class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
      >
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
          <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>
        <span
          class="hidden sm:inline-block sm:align-middle sm:h-screen"
          aria-hidden="true"
          >&#8203;</span
        >
        <div
          class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"
        >
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div
                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-emerald-100 sm:mx-0 sm:h-10 sm:w-10"
              >
                <i class="fas fa-edit text-emerald-600"></i>
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                <h3
                  class="text-lg leading-6 font-medium text-gray-900"
                  id="modal-title"
                >
                  Update Complaint Status
                </h3>
                <div class="mt-2">
                  <p class="text-sm text-gray-500">
                    Complaint ID:
                    <span id="modal-complaint-id" class="font-medium"
                      >WS-2023-00142</span
                    >
                  </p>
                  <p class="text-sm text-gray-500 mt-1">
                    Current Status:
                    <span
                      id="modal-current-status"
                      class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"
                      >In Progress</span
                    >
                  </p>

                  <div class="mt-4">
                    <label
                      for="status-select"
                      class="block text-sm font-medium text-gray-700"
                      >New Status</label
                    >
                    <select
                      id="status-select"
                      class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm rounded-md"
                    >
                      <option value="received">Received</option>
                      <option value="allocated">Allocated to Personnel</option>
                      <option value="in-progress" selected>In Progress</option>
                      <option value="resolved">Resolved</option>
                    </select>
                  </div>

                  <div class="mt-4">
                    <label
                      for="status-notes"
                      class="block text-sm font-medium text-gray-700"
                      >Notes (Optional)</label
                    >
                    <textarea
                      id="status-notes"
                      rows="3"
                      class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-emerald-500 focus:border-emerald-500 sm:text-sm"
                      placeholder="Add any additional details..."
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              id="confirm-update"
              class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-emerald-600 text-base font-medium text-white hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Update Status
            </button>
            <button
              type="button"
              id="cancel-update"
              class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-emerald-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Cancel
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // DOM Elements
      const loginPage = document.getElementById("login-page");
      const dashboard = document.getElementById("dashboard");
      const loginForm = document.getElementById("login-form");
      const loginError = document.getElementById("login-error");
      const logoutBtn = document.getElementById("logout-btn");
      const userMenuButton = document.getElementById("user-menu-button");
      const userMenu = document.getElementById("user-menu");
      const statusModal = document.getElementById("status-modal");
      const confirmUpdate = document.getElementById("confirm-update");
      const cancelUpdate = document.getElementById("cancel-update");
      const updateButtons = document.querySelectorAll(".update-btn");

      // Sample admin credentials (in a real app, this would be handled server-side)
      const adminCredentials = {
        email: "water@lokconnect.gov.in",
        password: "Secure@123",
      };

      // Toggle user menu
      userMenuButton.addEventListener("click", () => {
        userMenu.classList.toggle("hidden");
      });

      // Close user menu when clicking outside
      document.addEventListener("click", (e) => {
        if (!userMenu.contains(e.target) && e.target !== userMenuButton) {
          userMenu.classList.add("hidden");
        }
      });

      // Login form submission
      loginForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const email = document.getElementById("email").value;
        const password = document.getElementById("password").value;

        // Basic validation
        if (
          email === adminCredentials.email &&
          password === adminCredentials.password
        ) {
          // Successful login
          loginError.classList.add("hidden");
          loginPage.classList.add("hidden");
          dashboard.classList.remove("hidden");
          dashboard.classList.add("fade-in");
        } else {
          // Failed login
          document.getElementById("error-message").textContent =
            "Invalid credentials. Please try again.";
          loginError.classList.remove("hidden");
        }
      });

      // Logout functionality
      logoutBtn.addEventListener("click", (e) => {
        e.preventDefault();
        dashboard.classList.add("hidden");
        loginPage.classList.remove("hidden");
        loginForm.reset();
      });

      // Status update modal functionality
      updateButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const complaintId = button.getAttribute("data-id");
          document.getElementById(
            "modal-complaint-id"
          ).textContent = `WS-2023-00${complaintId}`;

          // In a real app, we would fetch the current status from the server
          const currentStatus = button
            .closest("tr")
            .querySelector("td:nth-child(5) span")
            .textContent.trim()
            .toLowerCase();

          // Set the current status in the modal
          const statusElement = document.getElementById("modal-current-status");
          statusElement.textContent =
            currentStatus.charAt(0).toUpperCase() + currentStatus.slice(1);

          // Update status badge color based on current status
          statusElement.className =
            "px-2 inline-flex text-xs leading-5 font-semibold rounded-full ";
          if (currentStatus === "received") {
            statusElement.classList.add("bg-gray-100", "text-gray-800");
          } else if (currentStatus === "allocated") {
            statusElement.classList.add("bg-blue-100", "text-blue-800");
          } else if (currentStatus === "in progress") {
            statusElement.classList.add("bg-yellow-100", "text-yellow-800");
          } else if (currentStatus === "resolved") {
            statusElement.classList.add("bg-green-100", "text-green-800");
          }

          // Set the dropdown to the current status
          document.getElementById("status-select").value =
            currentStatus.replace(" ", "-");

          // Show the modal
          statusModal.classList.remove("hidden");
        });
      });

      // Confirm status update
      confirmUpdate.addEventListener("click", () => {
        const newStatus = document.getElementById("status-select").value;
        const notes = document.getElementById("status-notes").value;
        const complaintId =
          document.getElementById("modal-complaint-id").textContent;

        // In a real app, this would send an API request to update the status
        console.log(
          `Updating ${complaintId} to ${newStatus} with notes: ${notes}`
        );

        // Update the UI (in a real app, we would refresh the data from the server)
        const statusText = newStatus.replace("-", " ");
        const statusElement = document
          .querySelector(`button[data-id="${complaintId.split("-")[3]}"]`)
          .closest("tr")
          .querySelector("td:nth-child(5) span");

        // Update status text and color
        statusElement.textContent =
          statusText.charAt(0).toUpperCase() + statusText.slice(1);
        statusElement.className =
          "px-2 inline-flex text-xs leading-5 font-semibold rounded-full ";

        if (newStatus === "received") {
          statusElement.classList.add("bg-gray-100", "text-gray-800");
        } else if (newStatus === "allocated") {
          statusElement.classList.add("bg-blue-100", "text-blue-800");
        } else if (newStatus === "in-progress") {
          statusElement.classList.add("bg-yellow-100", "text-yellow-800");
        } else if (newStatus === "resolved") {
          statusElement.classList.add("bg-green-100", "text-green-800");
        }

        // Update last updated time
        document
          .querySelector(`button[data-id="${complaintId.split("-")[3]}"]`)
          .closest("tr")
          .querySelector("td:nth-child(6)").textContent = "Just now";

        // Close the modal
        statusModal.classList.add("hidden");
        document.getElementById("status-notes").value = "";
      });

      // Cancel status update
      cancelUpdate.addEventListener("click", () => {
        statusModal.classList.add("hidden");
        document.getElementById("status-notes").value = "";
      });

      // Close modal when clicking outside
      statusModal.addEventListener("click", (e) => {
        if (e.target === statusModal) {
          statusModal.classList.add("hidden");
          document.getElementById("status-notes").value = "";
        }
      });

      // Sample filter functionality (would be more robust in a real app)
      document
        .getElementById("status-filter")
        .addEventListener("change", (e) => {
          const status = e.target.value;
          const rows = document.querySelectorAll("tbody tr");

          rows.forEach((row) => {
            const rowStatus = row
              .querySelector("td:nth-child(5) span")
              .textContent.trim()
              .toLowerCase()
              .replace(" ", "-");

            if (status === "" || rowStatus === status) {
              row.classList.remove("hidden");
            } else {
              row.classList.add("hidden");
            }
          });
        });

      // Sample search functionality
      document.getElementById("search").addEventListener("input", (e) => {
        const searchTerm = e.target.value.toLowerCase();
        const rows = document.querySelectorAll("tbody tr");

        rows.forEach((row) => {
          const complaintId = row
            .querySelector("td:nth-child(1)")
            .textContent.toLowerCase();
          const citizen = row
            .querySelector("td:nth-child(3)")
            .textContent.toLowerCase();
          const description = row
            .querySelector("td:nth-child(4)")
            .textContent.toLowerCase();

          if (
            complaintId.includes(searchTerm) ||
            citizen.includes(searchTerm) ||
            description.includes(searchTerm)
          ) {
            row.classList.remove("hidden");
          } else {
            row.classList.add("hidden");
          }
        });
      });
    </script>

    <!-- Complaint Details Modal (hidden by default) -->
    <div id="details-modal" class="hidden fixed inset-0 overflow-y-auto z-50">
      <div
        class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"
      >
        <div class="fixed inset-0 transition-opacity" aria-hidden="true">
          <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
        </div>
        <span
          class="hidden sm:inline-block sm:align-middle sm:h-screen"
          aria-hidden="true"
          >&#8203;</span
        >
        <div
          class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"
        >
          <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
            <div class="sm:flex sm:items-start">
              <div
                class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"
              >
                <i class="fas fa-file-alt text-blue-600"></i>
              </div>
              <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full">
                <h3 class="text-lg leading-6 font-medium text-gray-900">
                  Complaint Details
                </h3>
                <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div>
                    <p class="text-sm font-medium text-gray-500">
                      Complaint ID:
                    </p>
                    <p id="detail-id" class="text-sm text-gray-900 mt-1">
                      WS-2023-00142
                    </p>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-gray-500">Status:</p>
                    <p id="detail-status" class="text-sm mt-1">
                      <span
                        class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800"
                        >In Progress</span
                      >
                    </p>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-gray-500">
                      Submitted On:
                    </p>
                    <p id="detail-date" class="text-sm text-gray-900 mt-1">
                      15 Jun 2023
                    </p>
                  </div>
                  <div>
                    <p class="text-sm font-medium text-gray-500">
                      Last Updated:
                    </p>
                    <p id="detail-updated" class="text-sm text-gray-900 mt-1">
                      2 hours ago
                    </p>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">Citizen:</p>
                    <p id="detail-citizen" class="text-sm text-gray-900 mt-1">
                      Rahul Sharma
                    </p>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">Contact:</p>
                    <p id="detail-contact" class="text-sm text-gray-900 mt-1">
                      rahul.sharma@example.com | +91 9876543210
                    </p>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">Address:</p>
                    <p id="detail-address" class="text-sm text-gray-900 mt-1">
                      House No. 12, Sector 12, New Delhi - 110017
                    </p>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">
                      Description:
                    </p>
                    <p
                      id="detail-description"
                      class="text-sm text-gray-900 mt-1"
                    >
                      No water supply in Sector 12 for past 3 days. The problem
                      started after the maintenance work was done in the area.
                      We have been facing severe water shortage and have to rely
                      on water tankers.
                    </p>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">
                      Attachments:
                    </p>
                    <div class="mt-1 flex space-x-2">
                      <a
                        href="#"
                        class="text-blue-600 hover:text-blue-800 text-sm flex items-center"
                      >
                        <i class="fas fa-image mr-1"></i> photo1.jpg
                      </a>
                      <a
                        href="#"
                        class="text-blue-600 hover:text-blue-800 text-sm flex items-center"
                      >
                        <i class="fas fa-file-pdf mr-1"></i> document.pdf
                      </a>
                    </div>
                  </div>
                  <div class="md:col-span-2">
                    <p class="text-sm font-medium text-gray-500">
                      Resolution Notes:
                    </p>
                    <p id="detail-notes" class="text-sm text-gray-900 mt-1">
                      Our team has been dispatched to investigate the issue.
                      Temporary water supply has been arranged through tankers
                      until the pipeline issue is resolved.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
            <button
              type="button"
              id="close-details"
              class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
    <script src="admin_update.js"></script>
  </body>
</html>
